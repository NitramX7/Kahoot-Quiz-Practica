<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Podio | QuizMaster Pro</title>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0/css/all.min.css">
    <link rel="stylesheet" href="/css/quizmaster.css?v=2">
    <link rel="stylesheet" href="/css/rooms/podium.css?v=2">
</head>

<body>
    <div class="app-layout">
        <main class="main-content podium-main">
            <!-- Header -->
            <div class="podium-header">
                <h1 class="podium-title">游끥 Clasificaci칩n Final</h1>
                <p class="podium-subtitle">춰Gran partida! Aqu칤 est치n los resultados</p>
            </div>

            <!-- Podio de ganadores -->
            <div class="podium-container">
                <div class="podium-step step-2" th:if="${ranking.size() > 1}">
                    <div class="podium-rank">2춿</div>
                    <i class="fas fa-medal medal" style="color: #C0C0C0;"></i>
                    <span class="player-name" th:text="${ranking[1].name}">P2</span>
                    <div class="score" th:text="${ranking[1].score} + ' pts'">0</div>
                </div>

                <div class="podium-step step-1" th:if="${ranking.size() > 0}">
                    <i class="fas fa-crown crown-icon"></i>
                    <div class="podium-rank">1춿</div>
                    <i class="fas fa-medal medal" style="color: #FFD700;"></i>
                    <span class="player-name" th:text="${ranking[0].name}">P1</span>
                    <div class="score" th:text="${ranking[0].score} + ' pts'">0</div>
                </div>

                <div class="podium-step step-3" th:if="${ranking.size() > 2}">
                    <div class="podium-rank">3춿</div>
                    <i class="fas fa-medal medal" style="color: #CD7F32;"></i>
                    <span class="player-name" th:text="${ranking[2].name}">P3</span>
                    <div class="score" th:text="${ranking[2].score} + ' pts'">0</div>
                </div>
            </div>

            <!-- Estad칤sticas Globales -->
            <div class="stats-section">
                <h2 class="stats-title">
                    <i class="fas fa-chart-bar"></i> Estad칤sticas del Juego
                </h2>
                
                <div class="stats-grid">
                    <!-- Pregunta m치s fallada -->
                    <div class="stat-card stat-danger" th:if="${mostFailedQuestion != null}">
                        <div class="stat-icon">
                            <i class="fas fa-times-circle"></i>
                        </div>
                        <div class="stat-content">
                            <div class="stat-label">Pregunta m치s fallada</div>
                            <div class="stat-value" th:text="${mostFailedQuestion}">Pregunta dif칤cil</div>
                            <div class="stat-detail">
                                <span th:text="${mostFailedCount}">0</span> respuestas incorrectas
                            </div>
                        </div>
                    </div>

                    <!-- Pregunta m치s acertada -->
                    <div class="stat-card stat-success" th:if="${mostCorrectQuestion != null}">
                        <div class="stat-icon">
                            <i class="fas fa-check-circle"></i>
                        </div>
                        <div class="stat-content">
                            <div class="stat-label">Pregunta m치s acertada</div>
                            <div class="stat-value" th:text="${mostCorrectQuestion}">Pregunta f치cil</div>
                            <div class="stat-detail">
                                <span th:text="${mostCorrectCount}">0</span> respuestas correctas
                            </div>
                        </div>
                    </div>

                    <!-- Tasa global de aciertos -->
                    <div class="stat-card stat-info" th:if="${globalSuccessRate != null}">
                        <div class="stat-icon">
                            <i class="fas fa-percentage"></i>
                        </div>
                        <div class="stat-content">
                            <div class="stat-label">Tasa de Aciertos Global</div>
                            <div class="stat-value-large">
                                <span th:text="${globalSuccessRate}">0</span>%
                            </div>
                            <div class="stat-detail">Porcentaje general de respuestas correctas</div>
                        </div>
                    </div>
                </div>
            </div>

            <!-- Estad칤sticas Personales -->
            <div class="stats-section" th:if="${playerCorrect != null}">
                <h2 class="stats-title">
                    <i class="fas fa-user"></i> Tu Rendimiento
                </h2>
                
                <div class="personal-stats">
                    <div class="personal-stat">
                        <div class="personal-stat-circle success">
                            <i class="fas fa-check"></i>
                            <span class="personal-stat-number" th:text="${playerCorrect}">0</span>
                        </div>
                        <div class="personal-stat-label">Correctas</div>
                    </div>

                    <div class="personal-stat">
                        <div class="personal-stat-circle danger">
                            <i class="fas fa-times"></i>
                            <span class="personal-stat-number" th:text="${playerIncorrect}">0</span>
                        </div>
                        <div class="personal-stat-label">Incorrectas</div>
                    </div>

                    <div class="personal-stat">
                        <div class="personal-stat-circle info">
                            <i class="fas fa-chart-line"></i>
                            <span class="personal-stat-number">
                                <span th:text="${playerSuccessRate}">0</span>%
                            </span>
                        </div>
                        <div class="personal-stat-label">Tasa de Acierto</div>
                    </div>

                    <div class="personal-stat" th:if="${playerBestTime != null}">
                        <div class="personal-stat-circle warning">
                            <i class="fas fa-bolt"></i>
                            <span class="personal-stat-number">
                                <span th:text="${playerBestTime}">0</span>s
                            </span>
                        </div>
                        <div class="personal-stat-label">Mejor Tiempo</div>
                    </div>
                </div>
            </div>

            <!-- Ranking completo -->
            <div class="full-ranking" th:if="${ranking.size() > 3}">
                <h3 class="ranking-title">Clasificaci칩n Completa</h3>
                <div class="ranking-list">
                    <div th:each="p, iter : ${ranking}" th:if="${iter.index > 2}" class="ranking-item">
                        <div class="ranking-position" th:text="${iter.count} + '춿'">4춿</div>
                        <div class="ranking-name" th:text="${p.name}">Name</div>
                        <div class="ranking-score" th:text="${p.score} + ' pts'">0 pts</div>
                    </div>
                </div>
            </div>

            <!-- Bot칩n volver -->
            <div class="podium-actions">
                <a href="/blocks" class="btn btn-primary btn-home">
                    <i class="fas fa-home"></i> Volver al Inicio
                </a>
            </div>
        </main>
    </div>
</body>

</html>